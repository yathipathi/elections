<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SREE LAXMI OFFSET PRINTERS - Printing Order Calculator</title>

<style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f4f4f4; }
    h1 { text-align:center; margin-bottom:5px; font-size:26px; font-weight:bold; color:#222; }
    h2 { text-align:center; margin-top:0; font-size:16px; color:#555; }
    .container { max-width:1100px; margin:auto; background:white; padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
    fieldset { border:1px solid #ccc; padding:10px; margin-bottom:12px; border-radius:8px; }
    legend { font-weight:bold; }
    input,select { padding:6px; width:100%; max-width:260px; box-sizing:border-box; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th,td { border:1px solid #ddd; padding:6px; text-align:center; }
    th { background:#eaeaea; }
    .amount-display { background:#eaffd8; font-weight:bold; }
    button { padding:7px 13px; border:none; border-radius:5px; margin:5px; cursor:pointer; font-weight:bold; }
    .save-btn { background:#4CAF50; color:white; }
    .clear-btn { background:red; color:white; }
    .wa-btn { background:#25D366; color:white; }
    .delete-btn { background:#ff4757; color:white; }
    .total-box { text-align:right; font-size:20px; margin-top:15px; font-weight:bold; background:#e6ffe6; padding:12px; border-radius:6px; }
</style>
</head>
<body>

<div class="container">

<h1>ğŸ’  SREE LAXMI OFFSET PRINTERS ğŸ’ </h1>
<h2>Order Billing & Calculation System</h2>
<br>

<label><b>Date:</b></label>
<input type="text" id="billDate" readonly>

<br><br>

<label><b>Serial No:</b></label>
<input type="text" id="serialNo" readonly>

<br><br>

<label><b>Customer Name:</b></label>
<input type="text" id="customerName">

<br><br>

<label><b>Customer WhatsApp Number:</b></label>
<input type="text" id="customerWhatsapp" placeholder="Enter 10 digit mobile">

<br><br>

<!-- ================= Sections ================= -->

<fieldset>
  <legend>Namuna Ballot</legend>
  <select id="namunaCopies">
    <option value="0">Select</option>
    <option>100</option><option>200</option><option>300</option><option>400</option><option>500</option>
    <option>600</option><option>700</option><option>800</option><option>900</option><option>1000</option>
  </select>
  <input type="text" id="namunaAmount" readonly class="amount-display">
</fieldset>

<fieldset>
  <legend>Namuna Ballot 4 & 5</legend>
  <select id="namuna45Copies">
    <option value="0">Select</option>
    <option>100</option><option>200</option><option>300</option><option>400</option><option>500</option>
    <option>600</option><option>700</option><option>800</option><option>900</option><option>1000</option>
  </select>
  <input type="text" id="namuna45Amount" readonly class="amount-display">
</fieldset>

<fieldset>
  <legend>Handslips</legend>
  <select id="handslipCopies">
    <option value="0">Select</option>
    <option>100</option><option>200</option><option>300</option><option>400</option><option>500</option>
    <option>600</option><option>700</option><option>800</option><option>900</option><option>1000</option>
  </select>
  <input type="text" id="handslipAmount" readonly class="amount-display">
</fieldset>

<fieldset>
  <legend>Posters</legend>
  <select id="posterCopies">
    <option value="0">Select</option>
    <option>100</option><option>200</option><option>300</option><option>400</option><option>500</option>
    <option>600</option><option>700</option><option>800</option><option>900</option><option>1000</option>
  </select>
  <input type="text" id="posterAmount" readonly class="amount-display">
</fieldset>

<fieldset>
  <legend>Stickers (â‚¹50 Each)</legend>
  <input type="number" id="stickerCopies" placeholder="Enter quantity">
  <input type="text" id="stickerAmount" readonly class="amount-display">
</fieldset>

<fieldset>
  <legend>Kanduvulu (â‚¹15 Each)</legend>
  <input type="number" id="kanduvalCopies" placeholder="Enter quantity">
  <input type="text" id="kanduvalAmount" readonly class="amount-display">
</fieldset>

<fieldset>
  <legend>Jenda (â‚¹20 Each)</legend>
  <input type="number" id="jendaCopies" placeholder="Enter quantity">
  <input type="text" id="jendaAmount" readonly class="amount-display">
</fieldset>

<fieldset>
  <legend>Badges (â‚¹5 Each)</legend>
  <input type="number" id="badgeCopies" placeholder="Enter quantity">
  <input type="text" id="badgeAmount" readonly class="amount-display">
</fieldset>

<!-- ================= TOTAL ================= -->

<div class="total-box">
  Total Amount: â‚¹ <span id="grandTotal">0</span>
</div>

<!-- BUTTONS -->

<button class="clear-btn" onclick="clearForm()">Clear</button>
<button class="save-btn" onclick="saveEntry()">Save</button>
<button class="wa-btn" onclick="sendWhatsApp()">Send WhatsApp Bill</button>

<br><br>

<h2>ğŸ“Œ Saved Bills - SREE LAXMI OFFSET PRINTERS</h2>

<table>
<thead>
<tr>
  <th>Serial No</th><th>Date</th><th>Name</th><th>Amount</th><th>Action</th>
</tr>
</thead>
<tbody id="savedTable"></tbody>
</table>

</div>

<script>
// ====== BASIC SETUP ======
document.getElementById("billDate").value = new Date().toLocaleDateString("en-GB");
let billCount = 1;
const STORAGE_KEY = "slx_saved_bills";

function updateSerialField() {
  document.getElementById("serialNo").value = String(billCount).padStart(2, "0");
}

// ====== PRICE TABLES ======
const price = {
  0:0, 100:350, 200:450, 300:550, 400:650,
  500:750, 600:850, 700:950, 800:1050, 900:1150, 1000:1250
};

const posterPrice = {
  0:0, 100:450, 200:700, 300:800, 400:1000,
  500:1200, 600:1400, 700:1600, 800:1800, 900:2000, 1000:2200
};

// ====== CALCULATION ======
function updateTotals() {
  const n = price[document.getElementById('namunaCopies').value] || 0;
  const n45 = price[document.getElementById('namuna45Copies').value] || 0;
  const h = price[document.getElementById('handslipCopies').value] || 0;
  const p = posterPrice[document.getElementById('posterCopies').value] || 0;

  const s = (parseInt(document.getElementById('stickerCopies').value)||0) * 50;
  const k = (parseInt(document.getElementById('kanduvalCopies').value)||0) * 15;
  const j = (parseInt(document.getElementById('jendaCopies').value)||0) * 20;
  const b = (parseInt(document.getElementById('badgeCopies').value)||0) * 5;

  document.getElementById('namunaAmount').value = n;
  document.getElementById('namuna45Amount').value = n45;
  document.getElementById('handslipAmount').value = h;
  document.getElementById('posterAmount').value = p;
  document.getElementById('stickerAmount').value = s;
  document.getElementById('kanduvalAmount').value = k;
  document.getElementById('jendaAmount').value = j;
  document.getElementById('badgeAmount').value = b;

  document.getElementById('grandTotal').textContent = n+n45+h+p+s+k+j+b;
}

// Auto update listeners
document.querySelectorAll("input,select").forEach(el=>{
  el.addEventListener("input",updateTotals);
  el.addEventListener("change",updateTotals);
});

// ====== STORAGE ======
function getStoredBills() {
  try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; }
  catch { return []; }
}
function saveStoredBills(bills) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(bills));
}

function appendBillRow(bill) {
  const tbody=document.getElementById('savedTable');
  const row=document.createElement('tr');
  row.dataset.serial=bill.serial;

  row.innerHTML=`
    <td>${String(bill.serial).padStart(2,"0")}</td>
    <td>${bill.date}</td>
    <td>${bill.name}</td>
    <td>â‚¹${bill.amount}</td>
    <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
  `;
  tbody.appendChild(row);
}

function loadSavedBills(){
  const bills=getStoredBills();
  bills.forEach(b=>appendBillRow(b));
  if(bills.length>0){ billCount=bills[bills.length-1].serial+1; }
  updateSerialField();
}

// ====== BUTTON ACTIONS ======
function clearForm(){
  document.querySelectorAll("select").forEach(sel=>sel.value="0");
  document.querySelectorAll("input").forEach(inp=>{
    if(inp.id!=="billDate"&&inp.id!=="serialNo") inp.value="";
  });
  document.getElementById("grandTotal").textContent="0";
}

function deleteRow(btn){
  const row=btn.closest("tr");
  const serial=parseInt(row.dataset.serial);
  row.remove();
  let bills=getStoredBills().filter(b=>b.serial!==serial);
  saveStoredBills(bills);
}

function saveEntry(){
  updateTotals();
  const total=parseInt(document.getElementById('grandTotal').textContent);
  if(total===0){ alert("No amount to save."); return; }

  const bill={
    serial:billCount,
    date:document.getElementById('billDate').value,
    name:document.getElementById('customerName').value || "-",
    amount:total
  };

  appendBillRow(bill);
  const bills=getStoredBills(); bills.push(bill);
  saveStoredBills(bills);

  billCount++; updateSerialField(); clearForm();
}

function sendWhatsApp(){
  updateTotals();
  let num=document.getElementById('customerWhatsapp').value.replace(/\D/g,"");
  if(num.length===10) num="91"+num;
  if(!num){ alert("Enter WhatsApp number."); return; }

  const name=document.getElementById('customerName').value || "-";

  const msg=
`ğŸ“… Date: ${document.getElementById('billDate').value}
ğŸ§¾ Bill No: ${document.getElementById('serialNo').value}

ğŸ’  SREE LAXMI OFFSET PRINTERS ğŸ’ 

ğŸ‘¤ Customer: ${name}

Namuna Ballot: ${document.getElementById('namunaCopies').value} â€“ â‚¹${document.getElementById('namunaAmount').value}
Namuna Ballot 4 & 5: ${document.getElementById('namuna45Copies').value} â€“ â‚¹${document.getElementById('namuna45Amount').value}
Handslips: ${document.getElementById('handslipCopies').value} â€“ â‚¹${document.getElementById('handslipAmount').value}
Posters: ${document.getElementById('posterCopies').value} â€“ â‚¹${document.getElementById('posterAmount').value}
Stickers: ${document.getElementById('stickerCopies').value} â€“ â‚¹${document.getElementById('stickerAmount').value}
Kanduvulu: ${document.getElementById('kanduvalCopies').value} â€“ â‚¹${document.getElementById('kanduvalAmount').value}
Jenda: ${document.getElementById('jendaCopies').value} â€“ â‚¹${document.getElementById('jendaAmount').value}
Badges: ${document.getElementById('badgeCopies').value} â€“ â‚¹${document.getElementById('badgeAmount').value}

ğŸ’° Total: â‚¹${document.getElementById('grandTotal').textContent}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŒŸ Best Wishes - Sree Lakshmi Printing Press HUZURABAD ğŸ‡®ğŸ‡³
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ™ Thank You ğŸ™`;

  window.open(`https://wa.me/${num}?text=${encodeURIComponent(msg)}`,"_blank");
}

// Initialize
loadSavedBills();
</script>

</body>
</html>
